<section class="my-3">
  <div class="container-fluid">
    <div
      class="card"
      data-aos="fade-zoom-in"
      data-aos-easing="ease-in-back"
      data-aos-delay="300"
      data-aos-offset="0"
    >
      <form
        [formGroup]="formsign"
        (ngSubmit)="onSiguiente($event)"
        autocomplete="off"
      >
        <div *ngIf="step == 1">
          <h2 class="my-4 text-center">Sé parte de PIL MONEY</h2>
          <mat-divider ></mat-divider>
          <h4 class="my-4 text-center"><STRONG>DATOS DEL USUARIO</STRONG></h4>
          <mat-divider ></mat-divider>
          <!-- PASO 1 -->
          <div class="row justify-content-center" data-aos="zoom-out">
            <!-- NOMBRE -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Nombre</mat-label>
                <input
                  matInput
                  type="text"
                  [formControl]="name"
                  formControlName="name"
                  placeholder="Ingrese su nombre"
                  required
                />
                <mat-error
                  *ngIf="
                    formsign.get('name').errors && formsign.get('name').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('name')?.hasError('required')"
                    >El nombre es <strong>obligatorio</strong></mat-error
                  >
                </mat-error>
              </mat-form-field>
            </div>

            <!-- APELLIDO -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Apellido</mat-label>
                <input
                  matInput
                  type="text"
                  [formControl]="lastname"
                  formControlName="lastname"
                  placeholder="Ingrese su apellido"
                  required
                />

                <mat-error
                  *ngIf="
                    formsign.get('lastname').errors &&
                    formsign.get('lastname').touched
                  "
                ></mat-error>
                <mat-error
                  *ngIf="formsign.get('lastname')?.hasError('required')"
                  >El apellido es
                  <strong>obligatorio</strong>
                </mat-error>
              </mat-form-field>
            </div>

            <!-- USUARIO -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Usuario</mat-label>
                <input
                  matInput
                  type="text"
                  [formControl]="username"
                  formControlName="username"
                  placeholder="Ingrese su usuario"
                  required
                />
                <mat-error
                  *ngIf="
                    formsign.get('username').errors &&
                    formsign.get('username').touched
                  "
                >
                  <mat-error
                    *ngIf="formsign.get('username')?.hasError('required')"
                    >El usuario es
                    <strong>obligatorio</strong>
                  </mat-error>
                </mat-error>
              </mat-form-field>
            </div>

            <!-- EMAIL -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Correo Electrónico</mat-label>
                <input
                  matInput
                  [formControl]="email"
                  placeholder="pilmoney@mail.com"
                  formControlName="email"
                  type="email"
                  name="email"
                  id="email"
                  required
                />
                <mat-error
                  *ngIf="
                    formsign.get('email').errors &&
                    formsign.get('email').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('email').hasError('required')">
                    El correo electrónico es <strong>obligatorio</strong><br
                  /></mat-error>
                  <mat-error *ngIf="formsign.get('email').hasError('email')"
                    >El formato del correo electrónico debe ser
                    <strong>válido</strong><br />
                  </mat-error>
                </mat-error>
              </mat-form-field>
            </div>

            <!-- CONTRASEÑA -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Contraseña</mat-label>
                <input
                  matInput
                  type="password"
                  [formControl]="password"
                  formControlName="password"
                  placeholder="Ingrese una contraseña"
                />
                <button
                  mat-icon-button
                  matSuffix
                  (click)="hide = !hide"
                  [attr.aria-label]="'Hide password'"
                  [attr.aria-pressed]="hide"
                >
                  <mat-icon>{{
                    hide ? "visibility_off" : "visibility"
                  }}</mat-icon>
                </button>
                <mat-error
                  *ngIf="
                    formsign.get('password').errors &&
                    formsign.get('password').touched
                  "
                >
                  <mat-error
                    *ngIf="formsign.get('password').hasError('required')"
                  >
                    La contraseña es <strong>obligatorio</strong><br
                  /></mat-error>

                  <mat-error
                    *ngIf="formsign.get('password').hasError('minlength')"
                  >
                    La contraseña debe tener al menos
                    <strong> 8 dígitos </strong><br
                  /></mat-error>
                  <mat-error
                    *ngIf="
                      formsign
                        .get('password')
                        .hasError('createPasswordStrengthValidator')
                    "
                  >
                    La contraseña debe tener al menos una letra
                    <strong>minúscula</strong>, una letra
                    <strong>mayúscula</strong> y un <strong>número</strong
                    ><br />
                  </mat-error>

                  <mat-error
                    *ngIf="formsign.get('password').hasError('pattern')"
                  >
                    La contraseña debe tener al menos una letra
                    <strong>minúscula</strong>, una letra
                    <strong>mayúscula</strong> y al menos un
                    <strong>número</strong><br
                  /></mat-error>
                </mat-error>
              </mat-form-field>
            </div>

            <!-- REPETIR CONTRASEÑA -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Confirmar Contraseña</mat-label>
                <input
                  matInput
                  type="password"
                  [formControl]="cpassword"
                  formControlName="cpassword"
                  placeholder="Ingrese nuevamente su contraseña"
                  (change)="onPasswordChange()"
                  [type]="hide ? 'password' : 'text'"
                />
                <button
                mat-icon-button
                matSuffix
                (click)="hide = !hide"
                [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="hide"
              >
                <mat-icon>{{
                  hide ? "visibility_off" : "visibility"
                }}</mat-icon>
              </button>
                <mat-error
                  *ngIf="
                    formsign.get('cpassword').errors &&
                    formsign.get('cpassword').touched
                  "
                >
                  <mat-error
                    *ngIf="formsign.get('cpassword').hasError('required')"
                  >
                    La contraseña es <strong>obligatoria</strong><br
                  /></mat-error>
                  <mat-error *ngIf="cpassword.hasError('mismatch')">
                    La contraseña no <strong>coinciden</strong><br
                  /></mat-error>
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <!-- PASO 2 -->
        <div *ngIf="step == 2">
          <h2 class="text-center my-4">Sé parte de PIL MONEY</h2>
          <mat-divider ></mat-divider>
          <h4 class="my-4 text-center"><STRONG>DATOS DE RESIDENCIA</STRONG></h4>
          <mat-divider ></mat-divider>
          <div class="form-group row" data-aos="zoom-out">
            <!-- PAÍS -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>País de origen</mat-label>
                <mat-select
                  matNativeControl
                  [formControl]="pais"
                  formControlName="pais"
                  required
                >
                  <mat-option *ngFor="let pais of paises" [value]="pais">
                    {{ pais.name }}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="
                    formsign.get('pais').errors && formsign.get('pais').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('pais').hasError('required')"
                    >Por favor, <strong>ingrese</strong> su país</mat-error
                  >
                </mat-error>
              </mat-form-field>
            </div>

            <!-- PROVINCIA -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Provincia</mat-label>
                <mat-select
                  matNativeControl
                  [formControl]="provincia"
                  formControlName="provincia"
                  required
                >
                  <mat-option
                    *ngFor="let provincia of provincias"
                    [value]="provincia"
                  >
                    {{ provincia.country }}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="
                    formsign.get('provincia').errors &&
                    formsign.get('provincia').touched
                  "
                >
                  <mat-error
                    *ngIf="formsign.get('provincia').hasError('required')"
                    >Por favor, <strong>ingrese</strong> su provincia</mat-error
                  >
                </mat-error>
              </mat-form-field>
            </div>

            <!-- CIUDAD -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Ciudad</mat-label>
                <mat-select
                  matNativeControl
                  [formControl]="ciudad"
                  formControlName="ciudad"
                  required
                >
                  <mat-option *ngFor="let ciudad of ciudades" [value]="ciudad">
                    {{ ciudad.city }}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="
                    formsign.get('ciudad').errors &&
                    formsign.get('ciudad').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('ciudad').hasError('required')"
                    >Por favor, <strong>ingrese</strong> su ciudad</mat-error
                  >
                </mat-error>
              </mat-form-field>
            </div>

            <!-- CODIGO POSTAL -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Código Postal</mat-label>
                <input
                  matInput
                  type="text"
                  [formControl]="cpostal"
                  formControlName="cpostal"
                  placeholder="Ingrese su código postal"
                  required
                />
                <mat-error
                  *ngIf="
                    formsign.get('cpostal').errors &&
                    formsign.get('cpostal').touched
                  "
                >
                  <mat-error
                    *ngIf="formsign.get('cpostal')?.hasError('required')"
                    >El código postal es <strong>obligatorio</strong></mat-error
                  >
                </mat-error>
              </mat-form-field>
            </div>

            <!-- DOMICILIO -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Domicilio</mat-label>
                <input
                  matInput
                  type="text"
                  [formControl]="calle"
                  formControlName="calle"
                  placeholder="Ingrese su domicilio"
                />
                <mat-error
                  *ngIf="
                    formsign.get('calle').errors &&
                    formsign.get('calle').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('calle')?.hasError('required')"
                    >El domicilio es <strong>obligatorio</strong></mat-error
                  >
                </mat-error>
              </mat-form-field>
            </div>

            <!-- NUMERO DE DOMICILIO -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Número de domicilio</mat-label>
                <input
                  matInput
                  type="text"
                  placeholder="Ingrese su número de domicilio"
                  [formControl]="pdpto"
                  formControlName="pdpto"
                />
                <mat-error
                  *ngIf="
                    formsign.get('pdpto').errors &&
                    formsign.get('pdpto').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('pdpto')?.hasError('required')"
                    >El número del domicilio es
                    <strong>obligatorio</strong></mat-error
                  >
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <!-- PASO 3 -->
        <div *ngIf="step == 3">
          <h2 class="my-4 text-center">Sé parte de PIL MONEY</h2>
          <mat-divider ></mat-divider>
          <h4 class="my-4 text-center"><STRONG>DATOS PERSONALES</STRONG></h4>
          <mat-divider ></mat-divider>
          <div class="row justify-content-center" data-aos="zoom-out">
            <!-- CUIL -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>CUIL</mat-label>
                <input
                  matInput
                  type="text"
                  [formControl]="cuil"
                  formControlName="cuil"
                  placeholder="Ingrese su CUIL"
                />
                <mat-error
                  *ngIf="
                    formsign.get('cuil').errors && formsign.get('cuil').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('cuil')?.hasError('required')"
                    >El CUIL es <strong>obligatorio</strong>
                  </mat-error>
                </mat-error>
              </mat-form-field>
            </div>

            <!-- TELEFONO -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Telephone</mat-label>
                <span matPrefix>+ &nbsp;</span>
                <input
                  type="tel"
                  matInput
                  placeholder="(54) 351-123-123"
                  [formControl]="tel"
                  formControlName="tel"
                />
                <mat-icon matSuffix>phone</mat-icon>
                <mat-error
                  *ngIf="
                    formsign.get('tel').errors && formsign.get('tel').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('tel')?.hasError('required')"
                    >El teléfono es <strong>obligatorio</strong></mat-error
                  >
                </mat-error>
              </mat-form-field>
            </div>

            <!-- FECHA DE NACIMIENTO -->
            <div class="form-group col-lg-4 my-2 col-md-6">
              <mat-form-field class="example-full-width" appearance="standard">
                <mat-label>Fecha de Nacimiento</mat-label>
                <input
                  matInput
                  [matDatepicker]="picker"
                  placeholder="dd/mm/yy"
                  [formControl]="fecnac"
                  formControlName="fecnac"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
                <mat-error
                  *ngIf="
                    formsign.get('fecnac').errors &&
                    formsign.get('fecnac').touched
                  "
                >
                  <mat-error
                    *ngIf="formsign.get('fecnac').hasError('required')"
                  >
                    Confirme la fecha de nacimiento.
                  </mat-error>
                </mat-error>
              </mat-form-field>
            </div>

            <!-- TERMINOS Y CONDICIONES-->
            <div class="text-right col-lg-12 my-2  col-md-12">
              <p>
                <mat-checkbox type="checkbox" class="example-margin my-4">
                  He leído los
                  <a class="link" routerLink="/terms">Términos y Condiciones</a>
                </mat-checkbox>
              </p>
              <p>
                <mat-checkbox type="checkbox" class="example-margin">
                  Recibir novedades</mat-checkbox
                >
              </p>
            </div>
          </div>
        </div>

        <!-- PASO 4 -->
        <div *ngIf="step == 4">
          <h2 class="my-4 text-center">Sé parte de PIL MONEY</h2>
          <mat-divider ></mat-divider>
          <h4 class="my-4 align-content-center text-center" data-aos="zoom-out">
            <STRONG>FOTO DNI</STRONG>
          </h4>
          <mat-divider ></mat-divider>
          <div class="row justify-content-center my-4" data-aos="zoom-out">
            <!-- DNI FRONTAL -->
            <div class="col-lg-6 col-md-4 text-center">
              <mat-title>Foto DNI del <strong>FRENTE</strong></mat-title> <br />
              <mat-form-field class="text-center" appearance="fill">
                <mat-label *ngIf="selectedFiles; else newFile">{{
                  selectedFiles.item(0).name
                }}</mat-label>
                <ng-template #newFile>
                  <mat-label>Ingrese la imagen</mat-label>
                </ng-template>
                <input matInput disabled />
                <button
                  mat-raised-button
                  color="primary"
                  text-center
                  (click)="fileInput.click()"
                >
                  Subir imagen <mat-icon>cloud_upload</mat-icon>
                </button>
                <input
                  hidden
                  (change)="selectFile($event)"
                  #fileInput
                  type="file"
                  id="file"
                  [formControl]="foto1"
                  formControlName="foto1"
                  class="form-control"
                />
                <mat-error
                  class="text-center"
                  *ngIf="
                    formsign.get('foto1').errors &&
                    formsign.get('foto1').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('foto1').hasError('required')">
                    <strong>Ingrese</strong> el frente de su DNI
                  </mat-error>
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <!-- PASO 5 -->
        <div *ngIf="step == 5">
          <h2 class="my-4 text-center">Sé parte de PIL MONEY</h2>
          <mat-divider ></mat-divider>
          <h4 class="my-4 align-content-center text-center" data-aos="zoom-out">
            <STRONG>FOTO DNI</STRONG>
          </h4>
          <mat-divider ></mat-divider>
          <div class="row justify-content-center" data-aos="zoom-out">
            <!-- DNI REVERSO -->
            <div class="col-lg-6 col-md-4 text-center my-4">
              <mat-title>Foto DNI del <strong>REVERSO</strong></mat-title> <br />
              <mat-form-field class="text-center" appearance="fill">
                <mat-label *ngIf="selectedFilesF; else newFile">{{
                  selectedFilesF.item(0).name
                }}</mat-label>
                <ng-template #newFile>
                  <mat-label>Ingrese la imagen</mat-label>
                </ng-template>
                <input matInput disabled />
                <button
                  mat-raised-button
                  color="primary"
                  text-center
                  (click)="fileInputF.click()"
                >
                  Subir imagen <mat-icon>cloud_upload</mat-icon>
                </button>
                <input
                  hidden
                  (change)="selectFileF($event)"
                  #fileInputF
                  type="file"
                  id="file2"
                  [formControl]="foto2"
                  formControlName="foto2"
                  class="form-control"
                />
                <mat-error
                  class="text-center"
                  *ngIf="
                    formsign.get('foto2').errors &&
                    formsign.get('foto2').touched
                  "
                >
                  <mat-error *ngIf="formsign.get('foto2').hasError('required')">
                    <strong>Ingrese</strong> el frente de su DNI
                  </mat-error>
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <!-- PASO 6 -->
        <div *ngIf="step == 6" class="my-4">
            <div>
              <div
                class="text-center justify-content-center my-4"
                data-aos="zoom-out"
              >
                <h2 class="mt-4">
                  Te damos la BIENVENIDA <br />a <strong>PIL MONEY</strong
                  ><br />
                </h2>
                <img
                  class="img-fluid"
                  width="50%"
                  src="../../../assets/images/cardlogo.svg"
                />
                <div>
                  <button
                    type="submit"
                    class="btn btn-login my-3"
                    routerLink="/login"
                  >
                    Iniciar sesión
                  </button>
                </div>
                <div>
                  <a class="btn btn-return my-3" routerLink="/home">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      width="16"
                      height="16"
                    >
                      <path fill="none" d="M0 0h24v24H0z" />
                      <path
                        d="M12 13v7l-8-8 8-8v7h8v2z"
                        fill="rgba(255,255,255,1)"
                      />
                    </svg>
                    Volver al Inicio
                  </a>
                </div>
              </div>
            </div>
        </div>

        <div class="d-flex justify-content-center">
          <button
            class="btn btn-sign-h my-3"
            *ngIf="step >= 2 && step<6"
            (click)="anterior()"
          >
            Anterior
          </button>
          <button
            type="submit"
            class="btn btn-sign my-3"
            *ngIf="step >= 1 && step < 5"
            (click)="next()"
            id="btnNext"
          >
            Siguiente
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="16"
              height="16"
            >
              <path fill="none" d="M0 0h24v24H0z" />
              <path d="M12 13H4v-2h8V4l8 8-8 8z" />
            </svg>
          </button>
          <button
            type="submit"
            class="btn btn-sign my-3"
            *ngIf="step == 5"
            (click)="confirmado()"
          >
            Registrar
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="16"
              height="16"
            >
              <path fill="none" d="M0 0h24v24H0z" />
              <path
                d="M11.602 13.76l1.412 1.412 8.466-8.466 1.414 1.414-9.88 9.88-6.364-6.364 1.414-1.414 2.125 2.125 1.413 1.412zm.002-2.828l4.952-4.953 1.41 1.41-4.952 4.953-1.41-1.41zm-2.827 5.655L7.364 18 1 11.636l1.414-1.414 1.413 1.413-.001.001 4.951 4.951z"
              />
            </svg>
          </button>
        </div>
      </form>
    </div>
  </div>
</section>
